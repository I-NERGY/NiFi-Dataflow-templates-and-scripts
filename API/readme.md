## API DataFlow
In this example we will cover the API usage in NiFi where we first need to login and get the bearer token which is used afterwards for fetching the actual data.

![image](https://user-images.githubusercontent.com/90190347/189651969-3d166d14-0359-45ad-8ce8-be6089706cf9.png)

## How does it work?

### Logging in and getting the bearer token
Supose we have a remote URL looking like ```https://test.com/login``` where we post login information in this format ```grant_type=password&userName=user&password=password``` that gives us the bearer token in this format ```{"access_token":"TOKEN_HERE"}```. 
We will start with a ```GenerateFlowFile``` processor that has custom text content filled with the login payload.

![image](https://user-images.githubusercontent.com/90190347/189653553-916675fb-d8e0-44d1-9b53-599c4aa5226c.png)

Next we will follow it up with a ```InvokeHTTP``` proccessor which can interact with a configurable HTTP Endpoint. In this case we want to call a ```POST``` request to 
```https://test.com/login``` with a body that was generated by the previous processor. We will need to configure a few properties for this to work, first ```HTTP Method``` to ```POST```, ```Remote URL``` to ```https://test.com/login```, in this case ```Content-Type``` to ```application/json``` and the last and the most important one ```Send Message Body``` to ```true```.

![image](https://user-images.githubusercontent.com/90190347/189655202-4e36c0ff-9057-4549-ac37-54fd9b9e61c2.png)

![image](https://user-images.githubusercontent.com/90190347/189655240-06d17ee6-1612-4993-92a8-2359baa6796b.png)



